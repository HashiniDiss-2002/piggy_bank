<!DOCTYPE html>
<html>
<head>
  <title>üê∑ Piggy Bank - Saving Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: rgb(223, 106, 125);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .card {
      background-color: white;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      text-align: center;
      width: 350px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .card img {
      width: 100px;
      height: 100px;
      margin-bottom: 20px;
    }

    .card h1 {
      margin: 0 0 10px 0;
      font-size: 28px;
      color: rgb(223, 106, 125);
    }

    .card h2 {
      margin-bottom: 20px;
      font-size: 22px;
      color: #333;
    }

    .card input {
      width: 80%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    .card button {
      width: 40%;
      padding: 10px;
      margin: 10px 5px 0 5px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
      cursor: pointer;
      color: white;
    }

    .card button.login-btn {
      background-color: rgb(223, 106, 125);
    }

    .card button.signup-btn {
      background-color: rgb(100, 181, 246);
    }

    .card button:hover {
      opacity: 0.9;
    }

    .hidden {
      display: none;
    }

    h3 {
      margin-top: 25px;
      color: #333;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    ul li {
      margin: 5px 0;
      padding: 5px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }

    select, input[type=number] {
      width: 80%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <!-- Login -->
  <div id="auth-section" class="card">
    <img src="" alt="Piggy Bank Logo" />
    <h1>Piggy Bank</h1>
    <h2>Login</h2>
    <input type="email" id="email" placeholder="Email"><br>
    <input type="password" id="password" placeholder="Password"><br>
    <button class="login-btn" onclick="login()">Login</button>
    <button class="signup-btn" onclick="signup()">Signup</button>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="card hidden">
    <h1>Piggy Bank Dashboard</h1>
    <button class="login-btn" onclick="logout()">Logout</button>

    <h3>Categories</h3>
    <ul id="category-list"></ul>
    <input type="text" id="new-category" placeholder="New Category">
    <button class="signup-btn" onclick="addCategory()">Add Category</button>

    <h3>Add Expense</h3>
    <input type="text" id="expense-name" placeholder="Expense Name"><br>
    <input type="number" id="expense-amount" placeholder="Amount"><br>
    <select id="category-select"></select><br>
    <button class="signup-btn" onclick="addExpense()">Add Expense</button>

    <h3>Expenses History</h3>
    <ul id="expense-list"></ul>
  </div>

  <script>
  // Local authentication demo ‚Äî fixed credentials only
  const VALID_EMAIL = "user@example.com";
  const VALID_PASSWORD = "password123";

  // State
  let loggedIn = false;

  // DOM elements
  const authSection = document.getElementById("auth-section");
  const dashboard = document.getElementById("dashboard");

  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");

  const categoryList = document.getElementById("category-list");
  const categorySelect = document.getElementById("category-select");
  const expenseList = document.getElementById("expense-list");

  // Data (local only, no backend)
  let categories = [];
  let expenses = [];

  // Signup function (disabled)
  function signup() {
    alert("Signup is disabled in this demo. Use:\nEmail: user@example.com\nPassword: password123");
  }

  // Login function
  function login() {
    const email = emailInput.value.trim();
    const password = passwordInput.value;

    if (email === VALID_EMAIL && password === VALID_PASSWORD) {
      loggedIn = true;
      authSection.classList.add("hidden");
      dashboard.classList.remove("hidden");

      loadCategories();
      loadExpenses();
    } else {
      alert("Invalid email or password.");
    }
  }

  // Logout function
  function logout() {
    loggedIn = false;
    authSection.classList.remove("hidden");
    dashboard.classList.add("hidden");
    emailInput.value = "";
    passwordInput.value = "";
    categories = [];
    expenses = [];
  }

  // Load categories into list and select
  function loadCategories() {
    categoryList.innerHTML = "";
    categorySelect.innerHTML = "<option value=''>No Category</option>";

    categories.forEach((c, idx) => {
      categoryList.innerHTML += `<li>${c.name} - $${c.current_amount.toFixed(2)}</li>`;
      categorySelect.innerHTML += `<option value="${idx}">${c.name}</option>`;
    });
  }

  // Add category locally
  function addCategory() {
    const name = document.getElementById("new-category").value.trim();
    if (!name) return alert("Enter a category name!");

    // Check duplicate
    if (categories.find(c => c.name.toLowerCase() === name.toLowerCase())) {
      return alert("Category already exists!");
    }

    categories.push({ name, current_amount: 0 });
    document.getElementById("new-category").value = "";
    loadCategories();
  }

  // Load expenses into list
  function loadExpenses() {
    expenseList.innerHTML = "";

    expenses.forEach((e) => {
      const categoryName = e.categoryId === "" || e.categoryId === null
        ? "No Category"
        : (categories[e.categoryId]?.name || "No Category");

      expenseList.innerHTML += `<li>${e.name} - $${e.amount.toFixed(2)} (${categoryName})</li>`;
    });
  }

  // Add expense locally
  function addExpense() {
    const name = document.getElementById("expense-name").value.trim();
    const amountStr = document.getElementById("expense-amount").value.trim();
    const amount = parseFloat(amountStr);
    const categoryId = document.getElementById("category-select").value;

    if (!name || isNaN(amount) || amount <= 0) {
      return alert("Enter valid expense name and amount!");
    }

    expenses.unshift({ name, amount, categoryId: categoryId || null });

    // Update category amount if category selected
    if (categoryId !== "") {
      categories[categoryId].current_amount -= amount;
    }

    // Clear inputs
    document.getElementById("expense-name").value = "";
    document.getElementById("expense-amount").value = "";
    document.getElementById("category-select").value = "";

    loadCategories();
    loadExpenses();
  }

  // On page load
  window.onload = () => {
    loggedIn = false;
    authSection.classList.remove("hidden");
    dashboard.classList.add("hidden");
  };
</script>

</body>
</html>

